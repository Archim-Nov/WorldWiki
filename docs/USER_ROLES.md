# 用户分级清单

本项目目前只区分两类用户：**普通用户** 与 **可编辑用户**。

## 目标与原则
- 保持对外开放浏览，但编辑入口要可控、可追踪
- 可编辑权限必须由管理员显式授权
- 访问 Studio 先登录，再从 Profile 进入

## 普通用户
权限范围：
- 浏览所有公开页面
- 查看详情页与相关推荐
- 无法进入 Studio（编辑后台）
- 无法创建/编辑内容

适用人群：
- 普通读者
- 仅浏览或反馈的用户

## 可编辑用户
权限范围：
- 拥有普通用户所有权限
- 可登录并进入 Profile（/dashboard）
- 通过 Profile 进入 Studio（/studio）
- 在 Studio 内创建与编辑内容
- 可发布内容（是否允许发布取决于实际账号权限）

适用人群：
- 编辑与内容运营
- 管理员或被授权的贡献者

## 权限矩阵（当前版本）
```text
动作/能力                普通用户    可编辑用户
浏览公开页面             ✅         ✅
进入 Profile             ❌         ✅
进入 Studio              ❌         ✅
创建/编辑内容            ❌         ✅
发布内容                 ❌         ✅（取决于账号权限）
```

## 授权与管理（现阶段）
- 账号体系由 Supabase Auth 管理
- 可编辑用户需由管理员分配权限（Studio 账号权限）
- Studio 权限与站点登录是两套系统：需同时具备
- 未登录用户访问 /studio 会被引导至 /login

## 授权流程（建议）
1. 用户注册并登录（获得普通用户身份）
2. 向管理员申请编辑权限（说明用途与范围）
3. 管理员在 Sanity 项目中添加该用户为 Editor
4. 用户重新登录后，从 Profile 进入 Studio

## 撤销与风险控制（建议）
- 权限可随时撤销（从 Sanity 账号中移除 Editor）
- 高风险内容可临时限制编辑（仅管理员可改）
- 对异常编辑保留审计日志与回滚记录

## 后续可扩展方向（可选）
- 审核者/管理员角色
- 贡献者编辑但需审核发布
- 页面保护（高风险页面仅可编辑用户可改）
